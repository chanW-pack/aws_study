# AWS S3 객체 스토리지 클래스, 암호화 설정

---

## S3 객체 스토리지 클래스, 암호화 설정

---

S3 객체를 어떤 스토리지에 저장할지 그리고 저장할 때 암호화 여부를 설정할 수 있다.

S3에서 설정할 파일을 선택하고 속성 → 스토리지 클래스 → 편집으로 이동한다.

![Untitled](https://user-images.githubusercontent.com/84123877/180177549-793c0d03-150f-4cf2-a0cb-9d2d21a6cbf4.png)

> 스토리지 클래스(Storage Class)를 선택할 수 있다.
> 

**스토리지 클래스(Storage Class)** : 데이터를 어떤 스토리지에 저장할지 설정하는 옵션이다.

**범용** 

- **Amazon S3 Standard** 
: S3 Standard는 자주 액세스하는 데이터를 위해 높은 내구성(99.99999999)
가용성 및 성능을 갖춘 객체 스토리지를 제공한다. 
**짧은 지연 시간**과 많은 처리량을 제공하므로 다양상 사용 사례에 적합하다.

**알 수 없거나 변화하는 액세스**

- **Amazon S3 Intelligent-Tiering(지능형 계층화)** 
: 이 스토리지 클래스는 두 개의 액세스 계층에 객체를 저장하여 작동한다.
**한 계층은 빈번한 액세스에 맞게 최적화**되고 **저렴한 비용의 다른 한** **계층**은
**빈번하지 않은 계층에 맞게 최적화**한다.
**액세스 패턴 변화**를 기반으로 두 개의 액세스 계층 간에 객체를 **자동으로 이동**한다.

**빈번하지 않은 액세스**

- **Amazon S3 Standard-Infrequent Access(IA)** 
: **자주 액세스하지 않지만 필요할 때 빠르게 액세스해야 하는 데이터**에 적합하다.

- **Amazon S3 One Zone-Infrequesnt Access(IA)**
: **자주 엑세스하지 않지만 필요할 때 빠르게 액세스해야 하는 데이터에 적합**하다.
최소 3개의 가용 영역(AZ)에 데이터를 저장하는 다른 S3 스토리지 클래스와는 달리, 
S3 One Zone-IA는 **단일 AZ에 데이터를 저장**하며 **비용이 S3 Standard-IA 보다 20% 적게 든다.**

S3 One-Zone-IA는 자주 액세스하지 않는 데이터에 대한 저렴한 옵션을 원하지만
S3 Standard, S3 Standard-IA 스토리지와 같은 **가용성 및 복원력이 필요 없는 고객에게
적합**하다.

이 서비스는 **온프레미스 데이터** 또는 쉽게 다시 생성할 수 있는 데이터의 **보조 백업 복사본**을 
저장하는경우 좋은 선택이다.

**아카이브**

- **Amazon S3 Glacier** 
: S3 Glacier는 데이터 보관을 위한 안전하고 내구력 있으며 저렴한 스토리지 클래스이다.
비용을 낮게 유지하면서 동시에 다양한 요구를 지원하기 위해 S3 Glacier는 몇 분에서 
몇 시간까지 소요되는 세 가지 **검색 옵션**을 제공한다.

S3 Glacier에 객체를 직접 업로드하거나, **S3 수명 주기 정책**을 사용해서 활성 데이터를
위한 모든 S3 스토리지 클래스(S3 Standard, S3 Intelligent-Tiering, S3 Standard-IA, S3 One Zone-IA)dhk S3 Glacier 간에 데이터를 전송할 수 있다.

- **Amazon S3 Glacier Deep Archive** 
: S3 Glacier Deep Archive는 Amazon S3에서 가장 저렴한 비용의 스토리지 클래스이며
**1년에 한 두번정도 액세스** 할 수 있는 데이터의 장기 보관 및 디지털 보존을 지원한다.

이 서비스는 규제 규정 준수 요건을 충족하기 위해 **7-10년** 이상 데이터 세트를 보관하는 고객
(특히 금융 서비스, 의료, 공공 부문과 같이 엄격하게 규제되는 산업의 고객)을 위해 설계되었다.

**자기 테이프 라이브러리**의 이상적인 대안이다.
데이터를 정기적으로 검색하고 일부 데이터의 경우 몇 분 이내에 사용해야 할 수 있는 아카이브에 이상적이다.

### S3의 서버측 암호화

서버측 암호화는 데이터를 받는 애플리케이션 또는 서비스에 의해 해당 대상에서 
데이터를 암호화하는 것이다.

서버측 암호화는 S3 플랫폼 내에서 진행되며, 디스크에 저장될 때 데이터 객체를 암호화하고,

적절한 권한 증빙을 통해 데이터 인출을 요청할 때 복호화해 전송한다.

사용자는 서버측 암호화의 세 가지 옵션 중 하나를 사용할 수 있다.

1. **Amazon S3 관리형 키를 사용한 서버측 암호화 (SSE-S3)
(Amazon S3에서 자동으로  생성, 관리 및 사용하는 암호화 키)**
= SSE-S3를 사용하면 각 객체는 고유한 키로 암호화된다. 
또한 추가 보안 조치로 주기적으로 교체되는 루티 키를 사용하여 키 자체를 암호화한다.

(Amazon S3 서버 측 암호화는 가장 강력한 블록 암호 중 하나인 256비트
Advanced Encryption Standard(AES-256)를 사용하여 데이터를 암호화 한다.)

1. **AWS Key Management Serviec에 저장된 KMS 키를 사용한 서버 측 암호화 (SSE-KMS)
(AWS Ket Management Serviec(AWS KSM)로 보호되는 암호화 키)**
= SSE-KMS는 SSE*S3와 유사하지만 이 서비스 사용 시 몇 가지 추가적인 
이점이 있고 비용이 발생한다.

Amazon S3의 객체에 대한 무단 액세스에 대응하여 추가적인 보호를 제공하는 -KMS 키를
사용하려면 별도의 권한이 필요하다.
SSE-KMS도 KMS 키가 사용된 때와 사용 주체를 표시하는 감사 추적 기능을 제공한다.
또한 고객 관리형 키를 생성하고 관리하거나 사용자, 서비스 및 리전에
고유한 AWS 관리형 CMK를 사용할 수 있다.

1. **고객 제공 키를 사용한 서버 측 암호화 (SSE-C)**
= SSE-C를 사용하면 사용자는 암호화 키를 관리하고 Amazon S3는 암호화 (디스크에 쓸 때)
및 해독(객체에 액세스할 때)을 관리한다.

### 클라이언트측 암호화

클라이언트측 암호화는 데이터가 Amazon S3 서비스로 전달될 때 
보안을 보장하기 위해 로컬에서 데이터를 암호화하는 작업이다.

Amazon S3 서비스는 암호화된 데이터를 수신하며 데이터를 암호화 또는 복호화하는

과정에 기여하지 않는다.

AWS KMS의 Manged Customer Master Key(CMK)를 이용하면 S3에 전송하기 전

데이터를 암호화할 수 있으며, 데이터 객체 업로드 직전에 데이터 키를 생성한다.

Amazon S3 암호화 클라이언트를 통해 Client-Side Master Key를 사용할 수 있다.

서버측 암호화는 클라이언트측 암호화에 비해 복잡성이 낮으며, 대다수 사용자가 선호하는

방법이지만, 기업 및 기관에 따라 암호화 키를 직접 생성 및 관리하는 경우가 있으며

이 때는 클라이언트 암호화를 사용해야 할 것이다.

---
